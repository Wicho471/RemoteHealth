<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<StackPane fx:id="rootPane" xmlns="http://javafx.com/javafx/21.0.6" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.axolotlj.RemoteHealth.controller.DataAnalysisController">
   <AnchorPane prefHeight="200.0" prefWidth="200.0">
      <children>
      
      	<!-- Tu ventana principal envuelta -->
      	<BorderPane maxHeight="1.7976931348623157E308" maxWidth="-Infinity" minWidth="-Infinity" prefHeight="814.0" prefWidth="1309.0" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
      		<top>
      			<MenuBar BorderPane.alignment="CENTER">
      				<menus>
      					<Menu mnemonicParsing="false" text="File">
      						<items>
      							<MenuItem mnemonicParsing="false" text="Close" />
      						</items>
      					</Menu>
      					<Menu mnemonicParsing="false" text="Edit">
      						<items>
      							<MenuItem mnemonicParsing="false" text="Delete" />
      						</items>
      					</Menu>
      					<Menu mnemonicParsing="false" text="Help">
      						<items>
      							<MenuItem mnemonicParsing="false" text="About" />
      						</items>
      					</Menu>
      				</menus>
      			</MenuBar>
      		</top>
      		<center>
      			<HBox prefHeight="100.0" prefWidth="200.0" BorderPane.alignment="CENTER">
      				<children>
      					<VBox alignment="CENTER">
      						<children>
      							<HBox alignment="CENTER" prefHeight="40.0">
      								<children>
      									<HBox alignment="CENTER" prefHeight="100.0" prefWidth="200.0">
      										<children>
      											<Label alignment="CENTER" prefWidth="76.0" text="Archivos:" HBox.hgrow="ALWAYS" />
      											<ComboBox fx:id="choiseFile" prefWidth="150.0">
      												<HBox.margin>
      													<Insets left="10.0" right="10.0" />
      												</HBox.margin>
      											</ComboBox>
      										</children>
      									</HBox>
      									<Label text="ó">
      										<HBox.margin>
      											<Insets left="10.0" right="10.0" />
      										</HBox.margin>
      									</Label>
      									<HBox alignment="CENTER" prefHeight="40.0" prefWidth="152.0">
      										<children>
      											<Button fx:id="selectFileBtn" mnemonicParsing="false" onAction="#selectFileHandler" text="Selecciona un archivo" />
      										</children>
      									</HBox>
      								</children>
      								<VBox.margin>
      									<Insets bottom="10.0" top="10.0" />
      								</VBox.margin>
      							</HBox>
      							<TableView fx:id="anomalyTable" prefHeight="649.0" prefWidth="144.0" VBox.vgrow="ALWAYS">
      								<columns>
      									<TableColumn prefWidth="75.0" text="Hora" />
      									<TableColumn prefWidth="75.0" text="Anomalia" />
      									<TableColumn prefWidth="75.0" text="Severidad" />
      									<TableColumn prefWidth="75.0" text="Detalle" />
      									<TableColumn prefWidth="75.0" text="Mostrar" />
      								</columns>
      							</TableView>
                           <HBox alignment="CENTER" prefHeight="40.0">
                              <VBox.margin>
                                 <Insets bottom="10.0" top="10.0" />
                              </VBox.margin>
                              <children>
                                 <Button alignment="CENTER" mnemonicParsing="false" text="Analizar anomalias" textAlignment="CENTER">
                                    <HBox.margin>
                                       <Insets left="10.0" right="10.0" />
                                    </HBox.margin>
                                 </Button>
                                 <Button alignment="CENTER" mnemonicParsing="false" text="Decargar informe" textAlignment="CENTER">
                                    <HBox.margin>
                                       <Insets left="10.0" right="10.0" />
                                    </HBox.margin>
                                 </Button>
                              </children>
                           </HBox>
      						</children>
                        <HBox.margin>
                           <Insets bottom="5.0" left="5.0" right="5.0" />
                        </HBox.margin>
      					</VBox>
      					<VBox prefHeight="200.0" prefWidth="100.0" HBox.hgrow="ALWAYS">
      						<children>
      							<LineChart fx:id="ecgChart" title="Electro cardiograma" VBox.vgrow="ALWAYS">
      								<xAxis>
      									<NumberAxis label="Tiempo (s)" side="BOTTOM" />
      								</xAxis>
      								<yAxis>
      									<NumberAxis label="Amplitud" side="LEFT" />
      								</yAxis>
      							</LineChart>
      							<LineChart fx:id="ppgChart" title="Fotopletismografía" VBox.vgrow="ALWAYS">
      								<xAxis>
      									<NumberAxis label="Tiempo (s)" side="BOTTOM" />
      								</xAxis>
      								<yAxis>
      									<NumberAxis label="Amplitud" side="LEFT" />
      								</yAxis>
      							</LineChart>
      							<HBox alignment="CENTER">
      								<children>
      									<HBox alignment="CENTER" prefHeight="25.0" prefWidth="255.0">
      										<children>
      											<Label alignment="CENTER" prefHeight="17.0" prefWidth="201.0" text="Seccion de tiempo:" HBox.hgrow="ALWAYS" />
      											<ComboBox fx:id="choiseTimeLenght" prefHeight="25.0" prefWidth="228.0">
      												<HBox.margin>
      													<Insets left="10.0" right="10.0" />
      												</HBox.margin>
      											</ComboBox>
      										</children>
      										<HBox.margin>
      											<Insets left="10.0" right="10.0" />
      										</HBox.margin>
      									</HBox>
      									<HBox alignment="CENTER" prefHeight="40.0" prefWidth="152.0">
      										<children>
      											<TextField fx:id="initialTimeField" />
      											<Label text="a">
      												<HBox.margin>
      													<Insets left="5.0" right="5.0" />
      												</HBox.margin>
      											</Label>
      											<TextField fx:id="finalTimeField" />
      										</children>
      										<HBox.margin>
      											<Insets left="10.0" right="10.0" />
      										</HBox.margin>
      									</HBox>
      									<HBox alignment="CENTER" prefHeight="40.0" prefWidth="152.0">
      										<children>
      											<Button fx:id="startBtn" graphicTextGap="0.0" mnemonicParsing="false" onAction="#startHandle">
      												<HBox.margin>
      													<Insets left="5.0" right="5.0" />
      												</HBox.margin>
      												<graphic>
      													<ImageView fitHeight="10.0" fitWidth="10.0" pickOnBounds="true">
      														<image>
      															<Image url="@../img/icons/rewind.png" />
      														</image>
      													</ImageView>
      												</graphic>
      											</Button>
      											<Button fx:id="backwardBtn" graphicTextGap="0.0" mnemonicParsing="false" onAction="#backwardHandle">
      												<graphic>
      													<ImageView fitHeight="10.0" fitWidth="10.0" pickOnBounds="true">
      														<image>
      															<Image url="@../img/icons/back.png" />
      														</image>
      													</ImageView>
      												</graphic>
      												<HBox.margin>
      													<Insets left="5.0" right="5.0" />
      												</HBox.margin>
      											</Button>
      											<Button fx:id="nextBtn" graphicTextGap="0.0" mnemonicParsing="false" onAction="#nextHandle">
      												<graphic>
      													<ImageView fitHeight="10.0" fitWidth="10.0" pickOnBounds="true">
      														<image>
      															<Image url="@../img/icons/next.png" />
      														</image>
      													</ImageView>
      												</graphic>
      												<HBox.margin>
      													<Insets left="5.0" right="5.0" />
      												</HBox.margin>
      											</Button>
      											<Button fx:id="endBtn" graphicTextGap="0.0" mnemonicParsing="false" onAction="#endHandle">
      												<graphic>
      													<ImageView fitHeight="10.0" fitWidth="10.0" pickOnBounds="true">
      														<image>
      															<Image url="@../img/icons/fast-forward.png" />
      														</image>
      													</ImageView>
      												</graphic>
      												<HBox.margin>
      													<Insets left="5.0" right="5.0" />
      												</HBox.margin>
      											</Button>
      										</children>
      										<HBox.margin>
      											<Insets left="10.0" right="10.0" />
      										</HBox.margin>
      									</HBox>
      								</children>
      								<VBox.margin>
      									<Insets bottom="10.0" top="10.0" />
      								</VBox.margin>
      							</HBox>
      						</children>
                        <HBox.margin>
                           <Insets bottom="5.0" left="5.0" right="5.0" />
                        </HBox.margin>
      					</VBox>
      					<VBox alignment="CENTER" prefHeight="649.0" prefWidth="251.0" HBox.hgrow="NEVER">
      						<children>
      							<LineChart fx:id="bpmChart" title="Pulsos por Minuto" VBox.vgrow="ALWAYS">
      								<xAxis>
      									<NumberAxis side="BOTTOM" />
      								</xAxis>
      								<yAxis>
      									<NumberAxis side="LEFT" />
      								</yAxis>
      							</LineChart>
      							<LineChart fx:id="tempChart" title="Temperaturas" VBox.vgrow="ALWAYS">
      								<xAxis>
      									<NumberAxis side="BOTTOM" />
      								</xAxis>
      								<yAxis>
      									<NumberAxis side="LEFT" />
      								</yAxis>
      							</LineChart>
      							<LineChart fx:id="spo2Chart" title="SpO2" VBox.vgrow="ALWAYS">
      								<xAxis>
      									<NumberAxis side="BOTTOM" />
      								</xAxis>
      								<yAxis>
      									<NumberAxis side="LEFT" />
      								</yAxis>
      							</LineChart>
      							<LineChart fx:id="motionChart" title="Movimiento" VBox.vgrow="ALWAYS">
      								<xAxis>
      									<NumberAxis side="BOTTOM" />
      								</xAxis>
      								<yAxis>
      									<NumberAxis side="LEFT" />
      								</yAxis>
      							</LineChart>
                           <HBox alignment="CENTER" prefHeight="100.0" prefWidth="200.0">
                              <children>
            							<Button fx:id="backBtn" alignment="CENTER" mnemonicParsing="false" onAction="#backHandle" text="Regresar" textAlignment="CENTER">
                                    <HBox.margin>
                                       <Insets bottom="10.0" />
                                    </HBox.margin>
            							</Button>
                              </children>
                           </HBox>
      						</children>
                        <HBox.margin>
                           <Insets bottom="5.0" left="5.0" right="5.0" />
                        </HBox.margin>
      					</VBox>
      				</children>
      			</HBox>
      		</center>
      	</BorderPane>
      </children>
   </AnchorPane>

	<!-- Agregamos el spinner de carga -->
	<VBox fx:id="loadingOverlay" alignment="CENTER" mouseTransparent="true" visible="false" StackPane.alignment="CENTER">
		<children>
			<ProgressIndicator fx:id="loadingIndicator" prefHeight="200.0" prefWidth="200.0" VBox.vgrow="ALWAYS">
            <VBox.margin>
               <Insets bottom="10.0" />
            </VBox.margin></ProgressIndicator>
			<Label fx:id="loadingLabel" alignment="CENTER" text="Cargando datos..." visible="true">
				<font>
					<Font name="System Bold" size="24.0" />
				</font>
			</Label>
		</children>
	</VBox>


</StackPane>
